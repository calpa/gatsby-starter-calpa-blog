---
slug: why-import-react-from-react-in-a-functional-componenet
title: 為什麼函數式組件需要引進 React？
date: 2019-02-23T09:44:05.963Z
description: >-
  在編寫函數式組件的時候，無論是否有使用 React，我都需要在頂部導入 React。而最讓我迷惑的是在我編寫純函數組件，沒有在代碼裡面調用 React
  的時候。然而，我發現需要手動導入的真正原因是因為 JSX 轉譯的設定。
tags:
  - React
  - Babel
  - JSX
  - 閱讀
  - 前端
headerImage: 'https://i.imgur.com/3GRiphI.png'
templateKey: blog-post
---
## 困惑點

在編寫函數式組件的時候，無論是否有使用 React，我都需要在頂部導入 React。而最讓我迷惑的是在我編寫純函數組件，沒有在代碼裡面調用 React 的時候。然而，我發現需要手動導入的真正原因是因為 JSX 轉譯的設定。

比如說我們有一個 App.js 的文件，這裡相等於 Hello World 的設定。

```jsx
import React from "react";
const App = () => (
  <div>Hello World!!!</div>
);
export default App;
```

## 原因

![Imgur](https://i.imgur.com/MfkWgON.jpg)

在 Babel 轉譯我們的 App.js 的時候，會把 JSX 語法糖轉換為 `React.createElement` 方法。

```js
var App = function App() {
  return React.createElement(
    "div",
    null,
    "Hello World!!!"
  );
};
```

你可以在 [Babel REPL](https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=JYWwDg9gTgLgBAJQKYEMDG8BmUIjgIilQ3wG40IA7AZ3gEEww4BeOACgEoWA-duOADwATYADduACSQAbaRDgB1aNKEBCdQID0I8R1JIAHpFhwhSTCgCu0-o1JA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=true&sourceType=module&lineWrap=true&presets=react&prettier=false&targets=&version=7.3.3) 來看到 Babel 是如何轉譯。

## 自定義轉譯使用方法

我們能不能改寫轉譯後的方法， `React.createElement` 方法？

答案是可以的。

只需要在頂部加入 `/** @jsx 你要的方法 */` 就可以了。

deku 是一個用來使用純函數和虛擬 DOM 渲染界面的工具庫。它也是 React 生態圈裡面的一份子。

比如說這樣的代碼：

```js
/** @jsx dom */

var { dom } = require("deku");

var profile = <div>
  <img src="avatar.png" className="profile" />
  <h3>{[user.firstName, user.lastName].join(' ')}</h3>
</div>;
```

會轉譯為下面的代碼：

```js
/** @jsx dom */

var dom = require("deku").dom;

var profile = dom("div", null,
  dom("img", { src: "avatar.png", className: "profile" }),
  dom("h3", null, [user.firstName, user.lastName].join(" "))
);
```

### React 碎片

![React Fragment](https://i.imgur.com/TFKZdMK.png)

那麼 React 16.2.0 新增的 Fragments 呢？我們可以透過 `/** @jsxFrag 函數名稱 */`來達到轉譯後的修改目的。

輸入：

```js
/** @jsx dom */
/** @jsxFrag DomFrag */

var { dom, DomFrag } = require("deku");

var descriptions = items.map(item => (
  <>
    <dt>{item.name}</dt>
    <dd>{item.value}</dd>
  </>
));
```

輸出：

```js
/** @jsx dom */
/** @jsxFrag DomFrag */

var { dom, DomFrag } = require("deku");

var descriptions = items.map(item => dom(
  DomFrag,
  null,
  dom("dt", null, item.name),
  dom("dd", null, item.value)
));
```

你可以打開 [Babel REPL - React Fragment](https://babeljs.io/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=PQKhAIAECsGcA9wBMD2BbcJigjBAxAJwEMBzcAEXSLM2ACgA3Yw8Ab2XQBpLqTyAvuAC84QgFMAjgFcAlhIAUAIiTiA1tKUBKANxMWycbADGhWQAcALrJQA7WCPCzL4tLAB0aYuYXPXIgD5wBXBwAB4g0PCkSwC2PzR3W2I0cQEw4BjI0LCkJDiE92YAG2k0jLzIjICtXSA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=true&sourceType=module&lineWrap=true&presets=react&prettier=true&targets=&version=7.3.3) 來實時調試代碼。

## 參考資料

1. [Why import React from “react” in a functional component?](https://hackernoon.com/why-import-react-from-react-in-a-functional-component-657aed821f7a)
1. [@babel/plugin-transform-react-jsx](https://babeljs.io/docs/en/babel-plugin-transform-react-jsx)
1. [anthonyshort/deku - Github](https://github.com/anthonyshort/deku#readme)
